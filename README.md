# Reliant Challenge

These files are the result of a challenge proposed by reliant.

It consists of a shellscript daemon (forecastd) that, every minute, create a file containing the current weather forcast for João Pessoa and its service (forecast).

In addition, there is a second script that compresses and zip the files generated by forecastd shellscript and saves them within directories created in a specific format (/backup/{Month-Day-Hour-Minute}/backup.service).
These scripts need to be puppet managed.

The requirements are:
  1. Write a shellscript that:
    1. Runs in background indefinitely like a service
    2. On every minute create a file on a predetermined path containing the current weather forecast for João Pessoa
  2. Write a Puppet manifest to manage the shellscript as a service:
    1. The service must be restarted every puppet run, if it is not running.
    2. The start, stop, and status commands should explicitly declared on the manifest.
    3. The script file should be managed by Puppet, it must be on the path /usr/local/bin/.
  3. Write a script to backup files created by the service.
    1. The script can be written in shellscript, ruby or python
    2. The script should be puppet managed
    3. A Cron job should be used to execute the script in daily basis. This cronjob must be managed by Puppet.
    4. The backup files should be packed and compressed with tar and gzip
    5. The backup files should stored at /backup/{Month-Day-Hour-Minute}/service.backup path.
    6. The backup files should be only accessible by root, with read permission.
    7. The script should only retain the latest 10 backups

# Assumptions:

To run this project, it is needed to access the public API Open Weather Map (api.openweathermap.org)

- It is possible to change the forecast weather location by changing the latitude and longitude attributes defined by the variables "lat" and "lon" located at lines 53 and 54 respectively. The defaul location is João Pessoa (-7.1195, -34.845).

- The API key is 6641249303ea2ba4d4713bbafed7e716 (already setted)

- The files create by forecastd daemon are stored at "/opt/forecast_{YearMonthDayHourMinuteSecond}.txt" and can be configured changing the "file" variable at line 81 of the forecast.pp file.

- The interval (60 seconds) the files are created can be configured, changing the variable "intervalToWriteFile" at line 77 of the same file.

